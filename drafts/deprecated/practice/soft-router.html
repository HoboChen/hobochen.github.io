<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.0.0-rc1">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">
  <link rel="mask-icon" href="/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"192217.space","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"right","width":280,"display":"hide","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="This post will cover how to configure a Linux computer to a router. The router will be able to provide a transparent network to its clients. Transparent means it could distinguish whether the connecti">
<meta property="og:type" content="website">
<meta property="og:title" content="Soft Router as Transparent VPN">
<meta property="og:url" content="https://192217.space/drafts/deprecated/practice/soft-router.html">
<meta property="og:site_name" content="Hobo Chen&#39;s Blog">
<meta property="og:description" content="This post will cover how to configure a Linux computer to a router. The router will be able to provide a transparent network to its clients. Transparent means it could distinguish whether the connecti">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2017-04-16T21:07:11.000Z">
<meta property="article:modified_time" content="2022-10-17T04:47:32.956Z">
<meta property="article:author" content="Hobo Chen">
<meta property="article:tag" content="net">
<meta property="article:tag" content="practice">
<meta property="article:tag" content="long">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://192217.space/drafts/deprecated/practice/soft-router">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Soft Router as Transparent VPN | Hobo Chen's Blog
</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hobo Chen's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-notebook">

    <a href="/note" rel="section"><i class="fa fa-sticky-note fa-fw"></i>Notes</a>

  </li>
        <li class="menu-item menu-item-slide">

    <a href="/slide" rel="section"><i class="fa fa-desktop fa-fw"></i>Slides</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
  
  

          <div class="content page posts-expand">
            

    
    
    
    <div class="post-block" lang="en">
      <header class="post-header">

<h1 class="post-title" itemprop="name headline">Soft Router as Transparent VPN
</h1>

<div class="post-meta">
  
  <ul class="breadcrumb">
          
            <li><a href="/drafts/">DRAFTS</a></li>
            <li><a href="/drafts/deprecated/">DEPRECATED</a></li>
            <li><a href="/drafts/deprecated/practice/">PRACTICE</a></li>
            <li>SOFT-ROUTER</li>
          
  </ul>

</div>

</header>

      
      
      
      <div class="post-body">
          <p>This post will cover how to configure a Linux computer to a router.</p>
<p>The router will be able to provide a transparent network to its clients. Transparent means it could distinguish whether the connection needs forwarding to come across the GFW or not intelligently, which provides flawless experience to users in mainland china.</p>
<p>It frees the manual operations (like turn off the VPN) when you want to watch YOUKU just after watching Youtube.</p>
<span id="more"></span>
<h2 id="prerequisite">Prerequisite</h2>
<ol type="1">
<li>some hardware with two or more network interfaces</li>
<li>a shadowsocks server, which can be easily deployed in VPS (Linode, Digital Ocean, etc)</li>
</ol>
<h2 id="feature">Feature</h2>
<ol type="1">
<li></li>
</ol>
<h2 id="method">method</h2>
<ol type="1">
<li>configure linux kernel to provide ipv4 packet forwarding</li>
<li>use <code>iptables</code> to provide NAT and other things</li>
<li>use <code>dnsmasq</code> to provide DHCP and dns cache</li>
<li>use <code>ss-local</code>(listen on 60001, 60000) and <code>redsocks</code>(61000 -&gt; 12345) to provide local shadowsocks proxy</li>
<li>use <code>haproxy</code> (60001, 60000 -&gt; |load balance| 61000 )</li>
<li>use <code>overture</code> to provide clean dns resolution</li>
</ol>
<h2 id="network-configuration">network configuration</h2>
<p>Please ensure that you have more than two network interfaces working. You may use <code>ifconfig</code> to check. You may pick two network interfaces, and decide which is the one connected to Internet(WAN), so the left one is connected to clients of this router.</p>
<p>For me, <code>ens32</code> is WAN port, <code>ens33</code> is LAN port.</p>
<p>Then, we should configure the LAN port to static IP, which is required by using it as gateway and dns server. For debian like system, the configuration file is <code>/etc/network/interfaces</code>. Mine: <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">auto ens32</span><br><span class="line">iface ens32 inet dhcp</span><br><span class="line"></span><br><span class="line">auto ens33</span><br><span class="line">iface ens33 inet static</span><br><span class="line">    address 10.0.0.2</span><br><span class="line">    netmask 255.255.0.0</span><br><span class="line">    nameserver 10.0.0.2</span><br></pre></td></tr></table></figure></p>
<h2 id="clean-dns">clean DNS</h2>
<p><code>overture</code> is a dns server written by Go, <a href="https://github.com/shawn1m/overture/">Github Link</a>.</p>
<p>Download a release of your ISA, and extract the binary to <code>/usr/local/bin</code>, and copy other config files to <code>/etc/overture</code>. For me, the config file is <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;BindAddress&quot;: &quot;127.0.0.1:5454&quot;,</span><br><span class="line">  &quot;PrimaryDNS&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;Name&quot;: &quot;114DNS&quot;,</span><br><span class="line">      &quot;Address&quot;: &quot;114.114.114.114:53&quot;,</span><br><span class="line">      &quot;Protocol&quot;: &quot;udp&quot;,</span><br><span class="line">      &quot;SOCKS5Address&quot;: &quot;&quot;,</span><br><span class="line">      &quot;Timeout&quot;: 3,</span><br><span class="line">      &quot;EDNSClientSubnet&quot;: &#123;</span><br><span class="line">        &quot;Policy&quot;: &quot;disable&quot;,</span><br><span class="line">        &quot;ExternalIP&quot;: &quot;&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;AlternativeDNS&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;Name&quot;: &quot;GoogleDNS&quot;,</span><br><span class="line">      &quot;Address&quot;: &quot;8.8.8.8:53&quot;,</span><br><span class="line">      &quot;Protocol&quot;: &quot;tcp&quot;,</span><br><span class="line">      &quot;SOCKS5Address&quot;: &quot;$SS_LOCAL_ADDRESS&quot;,</span><br><span class="line">      &quot;Timeout&quot;: 3,</span><br><span class="line">      &quot;EDNSClientSubnet&quot;: &#123;</span><br><span class="line">        &quot;Policy&quot;: &quot;disable&quot;,</span><br><span class="line">        &quot;ExternalIP&quot;: &quot;&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;OnlyPrimaryDNS&quot;: false,</span><br><span class="line">  &quot;RedirectIPv6Record&quot;: false,</span><br><span class="line">  &quot;IPNetworkFile&quot;: &quot;../chinaip/chnroute.txt&quot;,</span><br><span class="line">  &quot;DomainFile&quot;: &quot;./domain_sample&quot;,</span><br><span class="line">  &quot;DomainBase64Decode&quot;: true,</span><br><span class="line">  &quot;HostsFile&quot;: &quot;./hosts_sample&quot;,</span><br><span class="line">  &quot;MinimumTTL&quot;: 0,</span><br><span class="line">  &quot;CacheSize&quot; : 0,</span><br><span class="line">  &quot;RejectQtype&quot;: [255]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>You may test it by <code>dig @127.0.0.1 -p 5454 www.facebook.com</code>.</p>
<h2 id="dnsmasq"><code>dnsmasq</code></h2>
<p>First install it, for debian like system, <code>sudo apt install dnsmasq</code>. Then edit <code>/etc/dnsmasq.conf</code> like that:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">strict-order</span><br><span class="line">no-resolv</span><br><span class="line">no-poll</span><br><span class="line"></span><br><span class="line">server=127.0.0.1#5454</span><br><span class="line"></span><br><span class="line">interface=ens33</span><br><span class="line">listen-address=127.0.0.1,10.0.0.2</span><br><span class="line"></span><br><span class="line">dhcp-range=10.0.0.20,10.0.254.254,255.255.0.0,168h</span><br><span class="line">dhcp-option=3,10.0.0.2</span><br><span class="line"></span><br><span class="line">cache-size=15000</span><br></pre></td></tr></table></figure>
<h2 id="packet-forward">packet forward</h2>
<p>Add a line in the bottom of <code>/etc/sysctl.conf</code>, <code>net.ipv4.ip_forward=1</code>, then execute <code>sysctl -p</code>. Then edit a <code>netcard.forward.sh</code>. <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">EXTIF=<span class="string">&quot;ens32&quot;</span></span><br><span class="line">INTIF=<span class="string">&quot;ens33&quot;</span></span><br><span class="line">iptables -t nat -A POSTROUTING -o <span class="variable">$EXTIF</span> -j MASQUERADE</span><br><span class="line">iptables -A FORWARD -i <span class="variable">$EXTIF</span> -o <span class="variable">$INTIF</span> -m state --state RELATED,ESTABLISHED -j ACCEPT</span><br><span class="line">iptables -A FORWARD -i <span class="variable">$INTIF</span> -o <span class="variable">$EXTIF</span> -j ACCEPT</span><br></pre></td></tr></table></figure></p>
<h2 id="local-shadowsocks-proxy">local shadowsocks proxy</h2>
<p>I use <code>ss-redir</code>, so you first need to install <code>ss-redir</code>. Then try to get it run, forward to local port <code>12345</code>.</p>
<h2 id="shadowsocks-forward">shadowsocks forward</h2>
<h3 id="get-china-ip-list">get china ip list</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl <span class="string">&#x27;http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest&#x27;</span> \</span><br><span class="line">    | grep ipv4 \</span><br><span class="line">    | grep CN \</span><br><span class="line">    | awk -F\| <span class="string">&#x27;&#123; printf(&quot;%s/%d\n&quot;, $4, 32-log($5)/log(2)) &#125;&#x27;</span> &gt; chnroute.txt</span><br></pre></td></tr></table></figure>
<h3 id="forward">forward</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">SS_SERVER_IP=<span class="string">&#x27;xxx.xxx.xxx.xxx&#x27;</span></span><br><span class="line"></span><br><span class="line">iptables -t nat -N SHADOWSOCKS</span><br><span class="line"></span><br><span class="line">iptables -t nat -A SHADOWSOCKS -d <span class="variable">$SS_SERVER_IP</span> -j RETURN</span><br><span class="line"></span><br><span class="line"><span class="comment"># lan</span></span><br><span class="line">iptables -t nat -A SHADOWSOCKS -d 0.0.0.0/8 -j RETURN</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -d 10.0.0.0/8 -j RETURN</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -d 127.0.0.0/8 -j RETURN</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -d 169.254.0.0/16 -j RETURN</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -d 172.16.0.0/12 -j RETURN</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -d 192.168.0.0/16 -j RETURN</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -d 224.0.0.0/4 -j RETURN</span><br><span class="line">iptables -t nat -A SHADOWSOCKS -d 240.0.0.0/4 -j RETURN</span><br><span class="line"></span><br><span class="line"><span class="comment"># china</span></span><br><span class="line"><span class="built_in">cat</span> chnroute.txt | xargs -I^ iptables -t nat -A SHADOWSOCKS -d <span class="string">&#x27;^&#x27;</span> -j RETURN</span><br><span class="line"></span><br><span class="line">iptables -t nat -A SHADOWSOCKS -p tcp -j REDIRECT --to-ports 12345</span><br><span class="line">iptables -t nat -I PREROUTING -p tcp -j SHADOWSOCKS</span><br></pre></td></tr></table></figure>
<h2 id="save-iptables-and-autostart">Save Iptables and Autostart</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install iptables-persistent</span><br><span class="line">iptables-save &gt; /etc/iptables/rules.v4</span><br></pre></td></tr></table></figure>
<p>There are many ways to autostart <code>ss-redir</code> and <code>overture</code>, so just pick one you like.</p>
<h2 id="other-things">other things</h2>
<ol type="1">
<li>practice in vmware / virtual box is strongly recommended</li>
<li>running in vmware esxi is easy to deploy as there is built-in vSwitch</li>
<li>if works, welcome to internet</li>
</ol>
<h2 id="update">2018.2.8 update</h2>
<ol type="1">
<li>x86 linux is stable enough, my thinkpad x200 runs without a hang for over 30 days</li>
<li>raspberry pi is not the best device as latency is too high (may up to several hundred ms) due to limited cpu performance</li>
</ol>

      </div>
      
      
      
    </div>
    
  <ul class="breadcrumb">
          
            <li><a href="/drafts/">DRAFTS</a></li>
            <li><a href="/drafts/deprecated/">DEPRECATED</a></li>
            <li><a href="/drafts/deprecated/practice/">PRACTICE</a></li>
            <li>SOFT-ROUTER</li>
          
  </ul>

    
    
    


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#prerequisite"><span class="nav-text">Prerequisite</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#feature"><span class="nav-text">Feature</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#method"><span class="nav-text">method</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#network-configuration"><span class="nav-text">network configuration</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#clean-dns"><span class="nav-text">clean DNS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dnsmasq"><span class="nav-text">dnsmasq</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#packet-forward"><span class="nav-text">packet forward</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#local-shadowsocks-proxy"><span class="nav-text">local shadowsocks proxy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#shadowsocks-forward"><span class="nav-text">shadowsocks forward</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#get-china-ip-list"><span class="nav-text">get china ip list</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#forward"><span class="nav-text">forward</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#save-iptables-and-autostart"><span class="nav-text">Save Iptables and Autostart</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#other-things"><span class="nav-text">other things</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#update"><span class="nav-text">2018.2.8 update</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Hobo Chen"
      src="/uploads/avatar.png">
  <p class="site-author-name" itemprop="name">Hobo Chen</p>
  <div class="site-description" itemprop="description">50% Humanities 50% Science</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">26</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hobochen" title="GitHub → https://github.com/hobochen" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hobochen96@gmail.com" title="Email → mailto:hobochen96@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>Email</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2013 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hobo Chen</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
